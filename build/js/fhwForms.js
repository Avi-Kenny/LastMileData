/*! Last-Mile-Data build: 2015-07-19 03:19:53 */

function mysql_date(a){if(0===arguments.length)var b=new Date;else var b=new Date(a);return b.getUTCFullYear()+"-"+twoDigits(1+b.getUTCMonth())+"-"+twoDigits(b.getUTCDate())}function getUUID(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return a}function mysql_time(a){if(0===arguments.length)var b=new Date;else var b=new Date(a);return b.toTimeString().substring(0,8)}function twoDigits(a){return a>=0&&10>a?"0"+a.toString():a>-10&&0>a?"-0"+(-1*a).toString():a.toString()}sessionStorage.username||window.location.assign("../pages/page_deqa.html"),localStorage.qaRecordID?(qaRecordID=localStorage.qaRecordID,delete localStorage.qaRecordID):qaRecordID=0,$(document).ready(function(){if($(".datepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".datepicker").blur(datepickerBlur),$(":checkbox").each(function(){$(this).after("<img class='chk_print' src='../images/chk_print.png'>")}),$("input[type=checkbox]").each(function(){void 0===$(this).attr("value")&&$(this).attr("value",1)}),$de_date=$("input[name=meta_DE_date]"),$de_init=$("input[name=meta_DE_init]"),$de_date.after("<input id='de_print_date'>"),$de_init.after("<input id='de_print_init'>"),$de_date.val(mysql_date()),$de_date.attr("readonly","readonly"),$de_init.val(sessionStorage.username),$de_init.attr("readonly","readonly"),$("#meBox").append("<input name='meta_DE_startTime' class='stored' type='hidden'>"),$("#meBox").append("<input name='meta_DE_endTime' class='stored' type='hidden'>"),$("#meBox").append("<input name='meta_dataSource' class='stored' type='hidden' value='paper'>"),$("#meBox").append("<input name='meta_UUID' class='stored' type='hidden'>"),$("input[name=meta_DE_startTime]").val(mysql_time()),$("input[name=meta_UUID]").val(getUUID()),qaRecordID){$("#lmd_next").hide();var a=["table","database"];LMD_fileSystemHelper.readAndUseFile("data.lmd",function(b){myRecordset=JSON.parse(b),currentRecord=JSON.parse(myRecordset[qaRecordID]);for(var c in currentRecord)-1==a.indexOf(c)&&("checkbox"==$("input[name="+c+"]").prop("type")?$("input[name="+c+"][value='"+currentRecord[c]+"']").prop("checked",!0):$("input[name="+c+"]").val(currentRecord[c]));$qa_date=$("input[name=qa_date]"),$qa_date.val(mysql_date()),$qa_date.attr("readonly","readonly")})}$("#lmd_next, #lmd_submit").click(function(){var a=$(this).attr("id");$('.stored[type!="checkbox"]').each(function(){$(this).css("background-color","")});var b=LMD_formValidate.validate($(".stored"));if("fail"===b.result){$("#validationBox").html("");for(var c=0;c<b.errorMessages.length;c++)$("#validationBox").append("&bull;&nbsp;"+b.errorMessages[c]+"<br>");for(var c=0;c<b.errorFields.length;c++)$("input[name="+b.errorFields[c]+"]").css("background-color","#FFCCCC");$("body").animate({scrollTop:0},500,function(){$("#validationBox").slideDown(500)})}else{$("input[name=meta_DE_endTime]").val(mysql_time());var d=0;LMD_fileSystemHelper.readFileIntoObject("data.lmd",function(b){for(var c in b)Number(c)>d&&(d=Number(c));d++;var e=readFieldsIntoObject(".stored");LMD_fileSystemHelper.readFileIntoObject("data.lmd",function(b){qaRecordID&&delete b[qaRecordID],b[d]=JSON.stringify(e),LMD_fileSystemHelper.createOrOverwriteFile("data.lmd",JSON.stringify(b),function(){$("body").animate({scrollTop:0},500,function(){$("body").fadeOut(500,function(){"lmd_next"==a?window.location.reload(!0):window.location.assign("../pages/page_deqa.html")})})})})})}}),$("#lmd_cancel").click(function(){$("body").fadeOut(500,function(){window.location.assign("../pages/page_deqa.html")})})});
//# sourceMappingURL=fhwForms.js.map